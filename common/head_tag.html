<script type="text/discourse-plugin" version="0.8.18">
let translations = I18n.translations[I18n.currentLocale()].js;
if (!translations) {
  translations = {};
}
if (!translations.composer) {
  translations.composer = {};
}
translations.strikethrough_button = settings.strikethrough_button_text;
translations.composer.strikethrough_prompt =
  settings.strikethrough_prompt;

// TOOLBAR
api.addToolbarPopupMenuOptionsCallback(() => {
  return {
      action: "strikethrough",
      icon: "strikethrough",
      label: "strikethrough_button"
  };
});

// ACTIONS
api.modifyClass("controller:composer", {
  actions: {
    strikethrough() {
      this.get("toolbarEvent").applySurround("<s>", "</s>", "strikethrough_prompt");
    },
  }
});
</script>